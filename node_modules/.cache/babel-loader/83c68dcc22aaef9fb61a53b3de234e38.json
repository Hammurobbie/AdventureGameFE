{"ast":null,"code":"var _jsxFileName = \"/Users/robbieporter/Documents/Lambda School/cs/buildweeks/CS-Build-Week-1/AdventureGameFE/src/Components/Login & Register/Login.js\";\nimport React, { useState } from \"react\";\nimport { Alert, Spinner } from \"reactstrap\";\nimport { LoginWrapper, Input, Button } from \"../../Styles/formStyle.module.scss\";\nimport axiosWithAuth from \"../../Middleware/axiosWithAuth\";\n\nfunction Login(props) {\n  const [loginState, setLoginState] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [successAlert, setSuccessAlert] = useState(false);\n  const [visibleWarning, setWarning] = useState(false);\n  const [error, setError] = useState({\n    username: \"\",\n    password1: \"\"\n  });\n  const [spinner, setSpin] = useState(false);\n\n  const handleChanges = e => {\n    e.preventDefault();\n    setLoginState({ ...loginState,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const validateRegister = props => {\n    if (props.password === \"\" && props.username === \"\") {\n      setError({\n        username: \"Username Cannot Be Blank\",\n        password: \"Password Cannot Be Blank\"\n      });\n      return false;\n    }\n\n    if (!props.username) {\n      setError({\n        username: \"Username Cannot Be Blank\"\n      });\n      return false;\n    }\n\n    if (!props.password) {\n      setError({\n        password: \"Password Cannot Be Blank\"\n      });\n      return false;\n    }\n\n    return true;\n  };\n\n  const onDismiss = () => {\n    setSuccessAlert(false);\n    setWarning(false);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const isValid = validateRegister(loginState);\n\n    if (isValid) {\n      setSpin(true);\n      axiosWithAuth().post(\"/login/\", loginState).then(res => {\n        localStorage.setItem(\"key\", res.data.key);\n        props.history.push(\"/play\");\n      }).catch(err => {\n        setWarning(true);\n        setSpin(false);\n        setError(\"Wrong Username/Password\");\n      }).finally(() => {\n        setLoginState({\n          username: \"\",\n          password: \"\"\n        });\n      });\n    } else {\n      setWarning(true);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: LoginWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, \"Login to account\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form1\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: Input,\n    type: \"text\",\n    name: \"username\",\n    placeholder: \"Placeholder\",\n    onChange: handleChanges,\n    value: loginState.username,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: Input,\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"password...\",\n    onChange: handleChanges,\n    value: loginState.password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Alert, {\n    color: \"danger\",\n    isOpen: visibleWarning,\n    toggle: onDismiss,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, error.username, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }), error.password ? error.password : \"\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: Button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, \"Login\")));\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/robbieporter/Documents/Lambda School/cs/buildweeks/CS-Build-Week-1/AdventureGameFE/src/Components/Login & Register/Login.js"],"names":["React","useState","Alert","Spinner","LoginWrapper","Input","Button","axiosWithAuth","Login","props","loginState","setLoginState","username","password","successAlert","setSuccessAlert","visibleWarning","setWarning","error","setError","password1","spinner","setSpin","handleChanges","e","preventDefault","target","name","value","validateRegister","onDismiss","handleSubmit","isValid","post","then","res","localStorage","setItem","data","key","history","push","catch","err","finally"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Alert, Spinner } from \"reactstrap\";\nimport {\n  LoginWrapper,\n  Input,\n  Button,\n} from \"../../Styles/formStyle.module.scss\";\nimport axiosWithAuth from \"../../Middleware/axiosWithAuth\";\n\nfunction Login(props) {\n  const [loginState, setLoginState] = useState({ username: \"\", password: \"\" });\n  const [successAlert, setSuccessAlert] = useState(false);\n  const [visibleWarning, setWarning] = useState(false);\n  const [error, setError] = useState({ username: \"\", password1: \"\" });\n  const [spinner, setSpin] = useState(false);\n\n  const handleChanges = (e) => {\n    e.preventDefault();\n    setLoginState({\n      ...loginState,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const validateRegister = (props) => {\n    if (props.password === \"\" && props.username === \"\") {\n      setError({\n        username: \"Username Cannot Be Blank\",\n        password: \"Password Cannot Be Blank\",\n      });\n      return false;\n    }\n    if (!props.username) {\n      setError({ username: \"Username Cannot Be Blank\" });\n      return false;\n    }\n    if (!props.password) {\n      setError({ password: \"Password Cannot Be Blank\" });\n      return false;\n    }\n    return true;\n  };\n\n  const onDismiss = () => {\n    setSuccessAlert(false);\n    setWarning(false);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const isValid = validateRegister(loginState);\n    if (isValid) {\n      setSpin(true);\n      axiosWithAuth()\n        .post(\"/login/\", loginState)\n        .then((res) => {\n          localStorage.setItem(\"key\", res.data.key);\n          props.history.push(\"/play\");\n        })\n        .catch((err) => {\n          setWarning(true);\n          setSpin(false);\n          setError(\"Wrong Username/Password\");\n        })\n        .finally(() => {\n          setLoginState({ username: \"\", password: \"\" });\n        });\n    } else {\n      setWarning(true);\n    }\n  };\n\n  return (\n    <div className={LoginWrapper}>\n      <h1>Login to account</h1>\n      <form className=\"form1\" onSubmit={handleSubmit}>\n        <p>Username</p>\n        <input\n          className={Input}\n          type=\"text\"\n          name=\"username\"\n          placeholder=\"Placeholder\"\n          onChange={handleChanges}\n          value={loginState.username}\n        />\n\n        <p>Password</p>\n        <input\n          className={Input}\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"password...\"\n          onChange={handleChanges}\n          value={loginState.password}\n        />\n        <Alert color=\"danger\" isOpen={visibleWarning} toggle={onDismiss}>\n          {error.username}\n          <br />\n          {error.password ? error.password : \"\"}\n        </Alert>\n        <button type=\"submit\" className={Button}>\n          Login\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}